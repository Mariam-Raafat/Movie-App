import{P as j,Tb as p,U as b,Ub as u,a as o,b as f,ca as I,ga as v,ha as M}from"./chunk-BU46OXKY.js";function D(e){let t=p(()=>e());return K(t)?new Proxy(e,{get(n,i){return i in t?(v(n[i])||Object.defineProperty(n,i,{value:u(()=>n()[i]),configurable:!0}),D(n[i])):n[i]}}):e}var C=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function K(e){if(e===null||typeof e!="object"||P(e))return!1;let t=Object.getPrototypeOf(e);if(t===Object.prototype)return!0;for(;t&&t!==Object.prototype;){if(C.includes(t.constructor))return!1;t=Object.getPrototypeOf(t)}return t===Object.prototype}function P(e){return typeof e?.[Symbol.iterator]=="function"}var A=new WeakMap,c=Symbol("STATE_SOURCE");function g(e,...t){e[c].update(n=>t.reduce((i,s)=>o(o({},i),typeof s=="function"?s(i):s),n)),J(e)}function H(e){return e[c]()}function F(e){return A.get(e[c])||[]}function J(e){let t=F(e);for(let n of t){let i=p(()=>H(e));n(i)}}function k(...e){let t=[...e],n=typeof t[0]=="function"?{}:t.shift(),i=t;return(()=>{class r{constructor(){let a=i.reduce((l,E)=>E(l),N()),{stateSignals:h,props:L,methods:O,hooks:T}=a,m=o(o(o({},h),L),O);this[c]=a[c];for(let l of Reflect.ownKeys(m))this[l]=m[l];let{onInit:S,onDestroy:w}=T;S&&S(),w&&b(I).onDestroy(w)}static \u0275fac=function(h){return new(h||r)};static \u0275prov=j({token:r,factory:r.\u0275fac,providedIn:n.providedIn||null})}return r})()}function N(){return{[c]:M({}),stateSignals:{},props:{},methods:{},hooks:{}}}function U(e){return t=>{let n=e(o(o(o({[c]:t[c]},t.stateSignals),t.props),t.methods));return Reflect.ownKeys(n),f(o({},t),{props:o(o({},t.props),n)})}}function x(e){return U(e)}function X(e){return t=>{let n=o(o(o({[c]:t[c]},t.stateSignals),t.props),t.methods),i=typeof e=="function"?e(n):e,s=r=>{let d=i[r],a=t.hooks[r];return d?()=>{a&&a(),d(n)}:a};return f(o({},t),{hooks:{onInit:s("onInit"),onDestroy:s("onDestroy")}})}}function R(e){return t=>{let n=e(o(o(o({[c]:t[c]},t.stateSignals),t.props),t.methods));return Reflect.ownKeys(n),f(o({},t),{methods:o(o({},t.methods),n)})}}function W(e){return t=>{let n=typeof e=="function"?e():e,i=Reflect.ownKeys(n);t[c].update(r=>o(o({},r),n));let s=i.reduce((r,d)=>{let a=u(()=>t[c]()[d]);return f(o({},r),{[d]:D(a)})},{});return f(o({},t),{stateSignals:o(o({},t.stateSignals),s)})}}var y="watchlist-movies";function q(){let e=localStorage.getItem(y);return e?JSON.parse(e):[]}var et=k({providedIn:"root"},W({watchList:q()}),x(e=>({count:u(()=>e.watchList().length)})),R(e=>({removeFromWatchList:t=>{let n=e.watchList().filter(i=>i.id!==t);g(e,{watchList:n}),localStorage.setItem(y,JSON.stringify(n))},toggleWatchList:t=>{let n=e.watchList(),s=n.find(r=>r.id===t.id)?n.filter(r=>r.id!==t.id):[...n,t];g(e,{watchList:s}),localStorage.setItem(y,JSON.stringify(s))},isInWatchList:t=>u(()=>e.watchList().some(n=>n.id===t))})));export{g as a,k as b,x as c,X as d,R as e,W as f,et as g};
