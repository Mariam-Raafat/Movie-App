import{a as P}from"./chunk-WFYPYIYR.js";import{a as W}from"./chunk-JNDZLQPX.js";import{b as $,g as z,i as N,p as V}from"./chunk-7MJTPNJ4.js";import{$a as x,Ab as C,Bb as q,Fb as U,Ja as R,M as S,Mb as L,Nb as F,U as v,Ub as w,Z as k,Za as c,_ as T,_a as m,ab as h,bb as g,ca as M,cb as r,db as o,eb as u,ha as I,ib as j,lb as O,mb as s,wa as b,ya as n,yb as a,zb as l}from"./chunk-BU46OXKY.js";function A(t,i){let f=!i?.manualCleanup?i?.injector?.get(M)??v(M):null,_=G(i?.equal),p;i?.requireSync?p=I({kind:0},{equal:_}):p=I({kind:1,value:i?.initialValue},{equal:_});let D,E=t.subscribe({next:d=>p.set({kind:1,value:d}),error:d=>{p.set({kind:2,error:d}),D?.()},complete:()=>{D?.()}});if(i?.requireSync&&p().kind===0)throw new S(601,!1);return D=f?.onDestroy(E.unsubscribe.bind(E)),w(()=>{let d=p();switch(d.kind){case 1:return d.value;case 2:throw d.error;case 0:throw new S(601,!1)}},{equal:i?.equal})}function G(t=Object.is){return(i,e)=>i.kind===1&&e.kind===1&&t(i.value,e.value)}var y=(t,i)=>i.id;function H(t,i){t&1&&(r(0,"div",0)(1,"div",2)(2,"span",3),a(3,"Loading..."),o()()())}function J(t,i){if(t&1&&(r(0,"span",15),a(1),o()),t&2){let e=i.$implicit;n(),C(" ",e.name," ")}}function K(t,i){if(t&1&&x(0,J,2,1,"span",15,y),t&2){let e=s(2);h(e.movie.genres)}}function Q(t,i){if(t&1&&u(0,"img",16),t&2){let e=i.$implicit;g("src","https://image.tmdb.org/t/p/w200"+e.logo_path,b)("alt",e.name)}}function X(t,i){if(t&1&&(r(0,"div"),x(1,Q,1,2,"img",16,y),o()),t&2){let e=s(2);n(),h(e.movie.production_companies)}}function Y(t,i){if(t&1&&(r(0,"a",14),a(1," Website "),o()),t&2){let e=s(2);g("href",e.movie.homepage,b)}}function Z(t,i){if(t&1&&(r(0,"div",19),u(1,"img",20),r(2,"div",21)(3,"h6",22),a(4),o(),r(5,"small",11),a(6),o()()()),t&2){let e=i.$implicit;n(),g("src","https://image.tmdb.org/t/p/w200"+e.poster_path,b)("alt",e.title),n(3),l(e.title),n(2),l(e.release_date)}}function ee(t,i){if(t&1&&(r(0,"h4",17),a(1,"Recommendations"),o(),r(2,"div",18),x(3,Z,7,4,"div",19,y),o()),t&2){let e=s(2);n(3),h(e.recommendations)}}function te(t,i){if(t&1&&(r(0,"div",24)(1,"h6",8),a(2),o(),r(3,"p",25),a(4),L(5,"date"),o(),r(6,"p"),a(7),o()()),t&2){let e=i.$implicit;n(2),l(e.author),n(2),C(" ",F(5,3,e.created_at,"mediumDate")," "),n(3),l(e.content)}}function ie(t,i){if(t&1&&(r(0,"h4",23),a(1,"Reviews"),o(),x(2,te,8,6,"div",24,y)),t&2){let e=s(2);n(2),h(e.reviews)}}function ne(t,i){if(t&1){let e=j();r(0,"div",1)(1,"div",4)(2,"div",5),u(3,"img",6),o(),r(4,"div",7)(5,"h2",8),a(6),o(),r(7,"button",9),O("click",function(){k(e);let _=s();return T(_.watchListStore.toggleWatchList(_.movie))}),u(8,"i",10),o(),r(9,"p",11),a(10),o(),r(11,"div",12),u(12,"i",13),a(13),o(),r(14,"p"),a(15),o(),c(16,K,2,0),r(17,"p")(18,"strong"),a(19,"Duration:"),o(),a(20),u(21,"br"),r(22,"strong"),a(23,"Language:"),o(),a(24),o(),c(25,X,3,0,"div"),c(26,Y,2,1,"a",14),o()(),c(27,ee,5,0),c(28,ie,4,0),o()}if(t&2){let e=s();n(3),g("alt",U(e.movie.title))("src","https://image.tmdb.org/t/p/w500"+e.movie.poster_path,b),n(3),l(e.movie.title),n(2),g("ngClass",e.watchListStore.isInWatchList(e.movie.id)()?"pi pi-heart-fill text-warning":"pi pi-heart"),n(2),l(e.movie.release_date),n(3),q(" ",e.movie.vote_average," (",e.movie.vote_count," votes) "),n(2),l(e.movie.overview),n(),m((e.movie.genres==null?null:e.movie.genres.length)>0?16:-1),n(4),C(" ",e.movie.runtime," min "),n(4),C(" ",e.movie.original_language," "),n(),m((e.movie.production_companies==null?null:e.movie.production_companies.length)>0?25:-1),n(),m(e.movie.homepage?26:-1),n(),m(e.recommendations.length>0?27:-1),n(),m(e.reviews.length>0?28:-1)}}var B=class t{_tmdbService=v(P);_route=v(V);watchListStore=v(W);paramMap=A(this._route.paramMap,{initialValue:null});movieId=w(()=>this.paramMap()?.get("id")||"");movie=null;loading=!0;recommendations=[];reviews=[];ngOnInit(){let i=this.movieId();i&&(this.loading=!0,this._tmdbService.getMovieDetails(i).subscribe(e=>{this.movie=e,this.loading=!1}),this._tmdbService.getRecommendations(i).subscribe(e=>{this.recommendations=e.results}),this._tmdbService.getReviews(i).subscribe(e=>{this.reviews=e.results}))}getRating(i){return i>=7?"bg-success text-white":i>=5?"bg-warning text-dark":"bg-danger text-white"}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=R({type:t,selectors:[["app-movie-details"]],decls:2,vars:1,consts:[[1,"text-center","my-5"],[1,"container","py-4"],["role","status",1,"spinner-border","text-warning"],[1,"visually-hidden"],[1,"row","mb-5"],[1,"col-md-4"],[1,"img-fluid","rounded",3,"src","alt"],[1,"col-md-8","position-relative"],[1,"fw-bold"],[1,"position-absolute","top-0","start-100","nav-link","me-2","watchlist",3,"click"],[3,"ngClass"],[1,"text-muted"],[1,"mb-2"],[1,"bi","bi-star-fill","text-warning"],["target","_blank",1,"btn","btn-outline-dark","mt-3",3,"href"],[1,"badge","rounded-pill","bg-warning","text-dark","me-2"],[1,"me-2","my-2",2,"max-height","40px",3,"src","alt"],[1,"fw-bold","mb-3"],[1,"d-flex","overflow-auto","pb-3"],[1,"card","me-3",2,"min-width","150px"],[1,"card-img-top",3,"src","alt"],[1,"card-body","p-2"],[1,"card-title","mb-1"],[1,"fw-bold","mt-5","mb-3"],[1,"border","rounded","p-3","mb-3"],[1,"mb-1","text-muted",2,"font-size","0.9rem"]],template:function(e,f){e&1&&c(0,H,4,0,"div",0)(1,ne,29,16,"div",1),e&2&&m(f.loading?0:f.movie?1:-1)},dependencies:[N,$,z],encapsulation:2})};export{B as MovieDetails};
