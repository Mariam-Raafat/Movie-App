import{P as j,Tb as h,U as b,Ub as a,a as o,b as u,ca as I,ga as v,ha as M}from"./chunk-BU46OXKY.js";function D(e){let t=h(()=>e());return K(t)?new Proxy(e,{get(n,i){return i in t?(v(n[i])||Object.defineProperty(n,i,{value:a(()=>n()[i]),configurable:!0}),D(n[i])):n[i]}}):e}var C=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function K(e){if(e===null||typeof e!="object"||P(e))return!1;let t=Object.getPrototypeOf(e);if(t===Object.prototype)return!0;for(;t&&t!==Object.prototype;){if(C.includes(t.constructor))return!1;t=Object.getPrototypeOf(t)}return t===Object.prototype}function P(e){return typeof e?.[Symbol.iterator]=="function"}var A=new WeakMap,c=Symbol("STATE_SOURCE");function p(e,...t){e[c].update(n=>t.reduce((i,s)=>o(o({},i),typeof s=="function"?s(i):s),n)),J(e)}function H(e){return e[c]()}function F(e){return A.get(e[c])||[]}function J(e){let t=F(e);for(let n of t){let i=h(()=>H(e));n(i)}}function k(...e){let t=[...e],n=typeof t[0]=="function"?{}:t.shift(),i=t;return(()=>{class r{constructor(){let f=i.reduce((d,E)=>E(d),N()),{stateSignals:l,props:L,methods:O,hooks:T}=f,m=o(o(o({},l),L),O);this[c]=f[c];for(let d of Reflect.ownKeys(m))this[d]=m[d];let{onInit:S,onDestroy:w}=T;S&&S(),w&&b(I).onDestroy(w)}static \u0275fac=function(l){return new(l||r)};static \u0275prov=j({token:r,factory:r.\u0275fac,providedIn:n.providedIn||null})}return r})()}function N(){return{[c]:M({}),stateSignals:{},props:{},methods:{},hooks:{}}}function U(e){return t=>{let n=e(o(o(o({[c]:t[c]},t.stateSignals),t.props),t.methods));return Reflect.ownKeys(n),u(o({},t),{props:o(o({},t.props),n)})}}function x(e){return U(e)}function R(e){return t=>{let n=e(o(o(o({[c]:t[c]},t.stateSignals),t.props),t.methods));return Reflect.ownKeys(n),u(o({},t),{methods:o(o({},t.methods),n)})}}function W(e){return t=>{let n=typeof e=="function"?e():e,i=Reflect.ownKeys(n);t[c].update(r=>o(o({},r),n));let s=i.reduce((r,y)=>{let f=a(()=>t[c]()[y]);return u(o({},r),{[y]:D(f)})},{});return u(o({},t),{stateSignals:o(o({},t.stateSignals),s)})}}var g="watchlist-movies";function q(){let e=localStorage.getItem(g);return e?JSON.parse(e):[]}var tt=k({providedIn:"root"},W({watchList:q()}),x(e=>({count:a(()=>e.watchList().length)})),R(e=>({removeFromWatchList:t=>{let n=e.watchList().filter(i=>i.id!==t);p(e,{watchList:n}),localStorage.setItem(g,JSON.stringify(n))},toggleWatchList:t=>{let n=e.watchList(),s=n.find(r=>r.id===t.id)?n.filter(r=>r.id!==t.id):[...n,t];p(e,{watchList:s}),localStorage.setItem(g,JSON.stringify(s))},isInWatchList:t=>a(()=>e.watchList().some(n=>n.id===t))})));export{tt as a};
