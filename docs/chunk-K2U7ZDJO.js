import{g as H}from"./chunk-IONHZB2F.js";import{a as B}from"./chunk-W7AA2VMU.js";import"./chunk-JANHW2XO.js";import{b as z,g as N,i as V,p as P,s as W,u as A}from"./chunk-5CXJVPRN.js";import{$a as b,Ab as C,Bb as O,Fb as q,Ib as F,Ja as R,M as S,Mb as U,Nb as $,U as _,Ub as y,Z as k,Za as s,_ as T,_a as d,ab as h,bb as u,ca as M,cb as r,db as n,eb as p,ha as I,ib as j,lb as L,mb as l,wa as x,ya as o,yb as a,zb as c}from"./chunk-BU46OXKY.js";function G(t,i){let g=!i?.manualCleanup?i?.injector?.get(M)??_(M):null,f=K(i?.equal),v;i?.requireSync?v=I({kind:0},{equal:f}):v=I({kind:1,value:i?.initialValue},{equal:f});let D,E=t.subscribe({next:m=>v.set({kind:1,value:m}),error:m=>{v.set({kind:2,error:m}),D?.()},complete:()=>{D?.()}});if(i?.requireSync&&v().kind===0)throw new S(601,!1);return D=g?.onDestroy(E.unsubscribe.bind(E)),y(()=>{let m=v();switch(m.kind){case 1:return m.value;case 2:throw m.error;case 0:throw new S(601,!1)}},{equal:i?.equal})}function K(t=Object.is){return(i,e)=>i.kind===1&&e.kind===1&&t(i.value,e.value)}var Q=t=>["/movie-details",t],w=(t,i)=>i.id;function X(t,i){t&1&&(r(0,"div",0)(1,"div",4)(2,"span",5),a(3,"Loading..."),n()()())}function Y(t,i){if(t&1&&(r(0,"span",17),a(1),n()),t&2){let e=i.$implicit;o(),C(" ",e.name," ")}}function Z(t,i){if(t&1&&b(0,Y,2,1,"span",17,w),t&2){let e=l(2);h(e.movie.genres)}}function ee(t,i){if(t&1&&p(0,"img",18),t&2){let e=l().$implicit;u("src","https://image.tmdb.org/t/p/w200"+e.logo_path,x)("alt",e.name)}}function te(t,i){if(t&1&&s(0,ee,1,2,"img",18),t&2){let e=i.$implicit;d(e.logo_path?0:-1)}}function ie(t,i){if(t&1&&(r(0,"div"),b(1,te,1,1,null,null,w),n()),t&2){let e=l(2);o(),h(e.movie.production_companies)}}function ne(t,i){if(t&1&&(r(0,"a",16),a(1," Website "),n()),t&2){let e=l(2);u("href",e.movie.homepage,x)}}function oe(t,i){if(t&1&&(r(0,"div",21)(1,"a",22),p(2,"img",23),n(),r(3,"div",24)(4,"h6",25),a(5),n(),r(6,"small",13),a(7),n()()()),t&2){let e=i.$implicit;o(),u("routerLink",F(5,Q,e.id)),o(),u("src","https://image.tmdb.org/t/p/w200"+e.poster_path,x)("alt",e.title),o(3),c(e.title),o(2),c(e.release_date)}}function re(t,i){if(t&1&&(r(0,"h4",19),a(1,"Recommendations"),n(),r(2,"div",20),b(3,oe,8,7,"div",21,w),n()),t&2){let e=l(2);o(3),h(e.recommendations)}}function ae(t,i){if(t&1&&(r(0,"div",27)(1,"h6",10),a(2),n(),r(3,"p",28),a(4),U(5,"date"),n(),r(6,"p"),a(7),n()()),t&2){let e=i.$implicit;o(2),c(e.author),o(2),C(" ",$(5,3,e.created_at,"mediumDate")," "),o(3),c(e.content)}}function le(t,i){if(t&1&&(r(0,"h4",26),a(1,"Reviews"),n(),b(2,ae,8,6,"div",27,w)),t&2){let e=l(2);o(2),h(e.reviews)}}function se(t,i){if(t&1){let e=j();r(0,"div",1)(1,"div",6)(2,"div",7),p(3,"img",8),n(),r(4,"div",9)(5,"h2",10),a(6),n(),r(7,"button",11),L("click",function(){k(e);let f=l();return T(f.watchListStore.toggleWatchList(f.movie))}),p(8,"i",12),n(),r(9,"p",13),a(10),n(),r(11,"div",14),p(12,"i",15),a(13),n(),r(14,"p"),a(15),n(),s(16,Z,2,0),r(17,"p")(18,"strong"),a(19,"Duration:"),n(),a(20),p(21,"br"),r(22,"strong"),a(23,"Language:"),n(),a(24),n(),s(25,ie,3,0,"div"),s(26,ne,2,1,"a",16),n()(),s(27,re,5,0),s(28,le,4,0),n()}if(t&2){let e=l();o(3),u("alt",q(e.movie.title))("src","https://image.tmdb.org/t/p/w500"+e.movie.poster_path,x),o(3),c(e.movie.title),o(2),u("ngClass",e.watchListStore.isInWatchList(e.movie.id)()?"pi pi-heart-fill text-warning":"pi pi-heart"),o(2),c(e.movie.release_date),o(3),O(" ",e.movie.vote_average," (",e.movie.vote_count," votes) "),o(2),c(e.movie.overview),o(),d((e.movie.genres==null?null:e.movie.genres.length)>0?16:-1),o(4),C(" ",e.movie.runtime," min "),o(4),C(" ",e.movie.original_language," "),o(),d((e.movie.production_companies==null?null:e.movie.production_companies.length)>0?25:-1),o(),d(e.movie.homepage?26:-1),o(),d(e.recommendations.length>0?27:-1),o(),d(e.reviews.length>0?28:-1)}}var J=class t{_tmdbService=_(B);_route=_(P);watchListStore=_(H);paramMap=G(this._route.paramMap,{initialValue:null});movieId=y(()=>this.paramMap()?.get("id")||"");movie=null;loading=!0;recommendations=[];reviews=[];ngOnInit(){let i=this.movieId();i&&(this.loading=!0,this._tmdbService.getMovieDetails(i).subscribe(e=>{this.movie=e,this.loading=!1}),this._tmdbService.getRecommendations(i).subscribe(e=>{this.recommendations=e.results}),this._tmdbService.getReviews(i).subscribe(e=>{this.reviews=e.results}))}getRating(i){return i>=7?"bg-success text-white":i>=5?"bg-warning text-dark":"bg-danger text-white"}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=R({type:t,selectors:[["app-movie-details"]],decls:5,vars:1,consts:[[1,"text-center","my-5"],[1,"container","py-4"],[1,"text-center","mt-4","mb-4"],["routerLink","/",1,"btn","btn-outline-secondary"],["role","status",1,"spinner-border","text-warning"],[1,"visually-hidden"],[1,"row","mb-5"],[1,"col-md-4"],[1,"img-fluid","rounded",3,"src","alt"],[1,"col-md-8","position-relative"],[1,"fw-bold"],[1,"position-absolute","top-0","start-100","nav-link","me-2","watchlist",3,"click"],[3,"ngClass"],[1,"text-muted"],[1,"mb-2"],[1,"bi","bi-star-fill","text-warning"],["target","_blank",1,"btn","btn-outline-dark","mt-3",3,"href"],[1,"badge","rounded-pill","bg-warning","text-dark","me-2"],[1,"me-2","my-2",2,"max-height","40px",3,"src","alt"],[1,"fw-bold","mb-3"],[1,"d-flex","overflow-auto","pb-3"],[1,"card","me-3",2,"min-width","150px"],[3,"routerLink"],[1,"card-img-top",3,"src","alt"],[1,"card-body","p-2"],[1,"card-title","mb-1"],[1,"fw-bold","mt-5","mb-3"],[1,"border","rounded","p-3","mb-3"],[1,"mb-1","text-muted",2,"font-size","0.9rem"]],template:function(e,g){e&1&&(s(0,X,4,0,"div",0)(1,se,29,16,"div",1),r(2,"div",2)(3,"a",3),a(4," Back to Home "),n()()),e&2&&d(g.loading?0:g.movie?1:-1)},dependencies:[V,z,N,A,W],encapsulation:2})};export{J as MovieDetails};
